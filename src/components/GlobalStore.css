/* ── Overlay ─────────────────────────────────────────────────────────────────── */
.gs-overlay {
  position: fixed; inset: 0; z-index: 800;
  background: rgba(26,21,35,0.4);
  backdrop-filter: blur(4px);
  display: flex; justify-content: flex-end;
  animation: gsFadeIn 0.2s ease;
}
@keyframes gsFadeIn { from { opacity:0; } to { opacity:1; } }

/* ── Panel ───────────────────────────────────────────────────────────────────── */
.gs-panel {
  width: 540px; height: 100%;
  background: var(--surface);
  border-left: 1.5px solid var(--border-2);
  display: flex; flex-direction: column;
  box-shadow: -16px 0 48px rgba(108,63,197,0.1), -4px 0 16px rgba(0,0,0,0.06);
  animation: gsSlideIn 0.3s cubic-bezier(0.4,0,0.2,1);
  position: relative; overflow: hidden;
}
@keyframes gsSlideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

/* ── Drag handle ─────────────────────────────────────────────────────────────── */
.gs-drag-handle {
  position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
  cursor: col-resize; z-index: 10;
  transition: background 0.15s;
}
.gs-drag-handle:hover { background: var(--purple-dim); }

/* ── Header ──────────────────────────────────────────────────────────────────── */
.gs-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.2rem 1.4rem 1rem;
  border-bottom: 1px solid var(--border); flex-shrink: 0;
}
.gs-header-left  { display: flex; align-items: center; gap: 0.75rem; }
.gs-header-right { display: flex; align-items: center; gap: 0.5rem; }

.gs-header-icon {
  width: 36px; height: 36px; border-radius: var(--r-sm);
  background: var(--purple-dim); color: var(--purple);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}

.gs-title { font-family: var(--font-display); font-size: 1.5rem; letter-spacing: 0.04em; color: var(--text); line-height: 1; }
.gs-subtitle { font-size: 0.72rem; color: var(--text-muted); margin-top: 0.15rem; }
.gs-subtitle strong { color: var(--purple); }

.gs-add-btn {
  display: flex; align-items: center; gap: 0.45rem;
  background: var(--purple); border: none; color: #fff;
  font-size: 0.8rem; font-weight: 700; padding: 0.5rem 1rem;
  border-radius: var(--r-sm); transition: all 0.18s;
}
.gs-add-btn:hover { background: var(--purple-mid); transform: translateY(-1px); }

.gs-close-btn {
  width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
  background: none; border: none; color: var(--text-muted);
  border-radius: var(--r-sm); transition: all 0.15s;
}
.gs-close-btn:hover { background: var(--bg-2); color: var(--text); }

/* ── Env bar ─────────────────────────────────────────────────────────────────── */
.gs-env-bar {
  display: flex; align-items: center; gap: 0.75rem;
  padding: 0.65rem 1.4rem;
  background: var(--bg); border-bottom: 1px solid var(--border);
  flex-shrink: 0; flex-wrap: wrap;
}
.gs-env-bar-label { font-size: 0.68rem; color: var(--text-dim); font-weight: 600; text-transform: uppercase; letter-spacing: 0.08em; white-space: nowrap; }
.gs-env-tabs { display: flex; gap: 0.35rem; }
.gs-env-tab {
  display: flex; align-items: center; gap: 0.35rem;
  padding: 0.3rem 0.7rem; border-radius: 100px;
  background: none; border: 1.5px solid var(--border);
  font-size: 0.75rem; color: var(--text-muted); font-weight: 500;
  transition: all 0.15s;
}
.gs-env-tab:hover { border-color: var(--env-color, var(--border-2)); color: var(--text); }
.gs-env-tab.active {
  border-color: var(--env-color, var(--purple));
  background: color-mix(in srgb, var(--env-color, var(--purple)) 12%, transparent);
  color: var(--env-color, var(--purple)); font-weight: 700;
}
.gs-var-count { font-size: 0.68rem; color: var(--text-dim); margin-left: auto; white-space: nowrap; }

/* ── Toolbar ─────────────────────────────────────────────────────────────────── */
.gs-toolbar {
  padding: 0.75rem 1.4rem;
  border-bottom: 1px solid var(--border);
  display: flex; flex-direction: column; gap: 0.6rem;
  flex-shrink: 0; background: var(--surface);
}

.gs-search-wrap { position: relative; }
.gs-search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-dim); pointer-events: none; }
.gs-search {
  width: 100%; background: var(--bg); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 0.5rem 2rem 0.5rem 2.2rem;
  font-size: 0.82rem; color: var(--text); outline: none; transition: border-color 0.15s, box-shadow 0.15s;
}
.gs-search:focus { border-color: var(--purple-mid); box-shadow: 0 0 0 3px var(--purple-dim); }
.gs-search::placeholder { color: var(--text-dim); }
.gs-search-clear {
  position: absolute; right: 0.6rem; top: 50%; transform: translateY(-50%);
  background: none; border: none; color: var(--text-muted); font-size: 1.1rem; line-height: 1;
}

.gs-filter-row { display: flex; gap: 0.3rem; flex-wrap: wrap; align-items: center; }
.gs-filter-cat {
  display: flex; align-items: center; gap: 0.3rem;
  padding: 0.22rem 0.6rem; border-radius: 100px;
  background: none; border: 1.5px solid var(--border);
  font-size: 0.72rem; font-weight: 500; color: var(--text-muted);
  transition: all 0.15s;
}
.gs-filter-cat:hover { border-color: var(--cat-color, var(--border-2)); color: var(--text); }
.gs-filter-cat.active {
  border-color: var(--cat-color, var(--purple));
  background: color-mix(in srgb, var(--cat-color, var(--purple)) 12%, transparent);
  color: var(--cat-color, var(--purple)); font-weight: 700;
}
.gs-cat-manage-btn {
  width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;
  background: none; border: 1.5px solid var(--border); border-radius: var(--r-sm);
  color: var(--text-dim); transition: all 0.15s; margin-left: auto;
}
.gs-cat-manage-btn:hover { border-color: var(--border-2); color: var(--text); }

/* Tag filter row */
.gs-tag-filter-row { display: flex; align-items: center; gap: 0.3rem; flex-wrap: wrap; }
.gs-tag-filter-label { font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; font-weight: 600; }
.gs-tag-filter {
  padding: 0.15rem 0.5rem; border-radius: 100px;
  background: var(--bg-2); border: 1px solid var(--border);
  font-size: 0.68rem; color: var(--text-muted); transition: all 0.15s;
}
.gs-tag-filter:hover { border-color: var(--border-2); color: var(--text); }
.gs-tag-filter.active { background: var(--purple-dim); border-color: var(--purple-light); color: var(--purple); font-weight: 600; }

/* Category editor */
.gs-cat-editor {
  background: var(--bg); border: 1.5px solid var(--border);
  border-radius: var(--r-md); padding: 0.75rem; display: flex; flex-direction: column; gap: 0.5rem;
  animation: dropIn 0.15s ease;
}
@keyframes dropIn { from{opacity:0;transform:translateY(-6px);}to{opacity:1;transform:translateY(0);} }
.gs-cat-editor-title { font-size: 0.68rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); }
.gs-cat-editor-list { display: flex; flex-direction: column; gap: 0.25rem; }
.gs-cat-editor-row { display: flex; align-items: center; gap: 0.5rem; padding: 0.25rem 0.4rem; border-radius: 4px; }
.gs-cat-editor-row:hover { background: var(--bg-2); }
.gs-cat-editor-label { flex: 1; font-size: 0.78rem; color: var(--text-2); }
.gs-cat-del { background: none; border: none; color: var(--text-dim); font-size: 1rem; transition: color 0.12s; }
.gs-cat-del:hover { color: var(--danger); }
.gs-cat-add-row { display: flex; gap: 0.4rem; }
.gs-cat-input {
  flex: 1; background: var(--surface); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 0.35rem 0.6rem;
  font-size: 0.78rem; color: var(--text); outline: none;
}
.gs-cat-input:focus { border-color: var(--purple-mid); }
.gs-cat-add-submit {
  background: var(--purple); border: none; color: #fff;
  font-size: 0.75rem; font-weight: 700; padding: 0.35rem 0.75rem;
  border-radius: var(--r-sm); transition: background 0.15s;
}
.gs-cat-add-submit:hover { background: var(--purple-mid); }

/* ── Add form ────────────────────────────────────────────────────────────────── */
.gs-add-wrap {
  border-bottom: 1px solid var(--border-2); flex-shrink: 0;
  max-height: 50vh; overflow-y: auto; background: var(--bg);
}
.gs-add-form { padding: 1rem 1.4rem; display: flex; flex-direction: column; gap: 0.75rem; }
.gs-add-form-head { display: flex; align-items: center; justify-content: space-between; font-size: 0.82rem; font-weight: 700; color: var(--text); }
.gs-icon-btn { background: none; border: none; color: var(--text-muted); font-size: 1.2rem; line-height: 1; transition: color 0.12s; }
.gs-icon-btn:hover { color: var(--danger); }
.gs-add-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.6rem; }
.gs-add-field { display: flex; flex-direction: column; gap: 0.3rem; }
.gs-add-field label { font-size: 0.68rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); }
.gs-add-input {
  background: var(--surface); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 0.45rem 0.7rem;
  font-size: 0.82rem; color: var(--text); outline: none; transition: border-color 0.15s;
}
.gs-add-input:focus { border-color: var(--purple-mid); }
.gs-add-input::placeholder { color: var(--text-dim); }
.gs-mono { font-family: 'Fira Code', monospace; }
.gs-add-row { flex-direction: row; align-items: center; gap: 0.6rem; }
.gs-add-actions { display: flex; gap: 0.5rem; justify-content: flex-end; padding-top: 0.25rem; }
.gs-add-cancel {
  background: none; border: 1.5px solid var(--border); border-radius: var(--r-sm);
  color: var(--text-muted); font-size: 0.8rem; padding: 0.45rem 1rem; transition: all 0.15s;
}
.gs-add-cancel:hover { border-color: var(--border-2); color: var(--text); }
.gs-add-submit {
  background: var(--purple); border: none; color: #fff;
  font-size: 0.8rem; font-weight: 700; padding: 0.45rem 1.1rem;
  border-radius: var(--r-sm); transition: all 0.18s;
}
.gs-add-submit:hover:not(:disabled) { background: var(--purple-mid); }
.gs-add-submit:disabled { opacity: 0.45; }
.gs-req { color: var(--purple); }

/* ── Variable list ───────────────────────────────────────────────────────────── */
.gs-list { flex: 1; overflow-y: auto; padding: 0.75rem 1rem 1rem; }
.gs-list::-webkit-scrollbar { width: 4px; }
.gs-list::-webkit-scrollbar-thumb { background: var(--border-2); border-radius: 2px; }

.gs-group { margin-bottom: 1.1rem; }
.gs-group-label {
  display: flex; align-items: center; gap: 0.4rem;
  font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em;
  color: var(--text-muted); padding: 0 0.4rem; margin-bottom: 0.35rem;
}
.gs-group-count {
  background: var(--bg-2); color: var(--text-dim);
  font-size: 0.6rem; padding: 0.05rem 0.4rem; border-radius: 100px;
}

/* Var row */
.gs-var-row {
  border: 1.5px solid var(--border); border-radius: var(--r-md);
  margin-bottom: 0.4rem; overflow: hidden; transition: border-color 0.18s;
  animation: varIn 0.2s ease both;
}
@keyframes varIn { from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);} }
.gs-var-row:hover { border-color: var(--border-2); }
.gs-var-row--expanded { border-color: var(--purple-light); }

.gs-var-summary {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.6rem 0.75rem; cursor: pointer;
  background: var(--surface); gap: 0.5rem;
}
.gs-var-summary:hover { background: var(--bg); }

.gs-var-left  { display: flex; align-items: center; gap: 0.45rem; min-width: 0; flex: 1; }
.gs-var-right { display: flex; align-items: center; gap: 0.4rem; flex-shrink: 0; }

.gs-chevron { font-size: 0.6rem; color: var(--text-dim); flex-shrink: 0; }
.gs-var-key { font-family: 'Fira Code', monospace; font-size: 0.78rem; font-weight: 600; color: var(--purple); white-space: nowrap; }
.gs-secret-badge {
  font-size: 0.58rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em;
  background: rgba(239,68,68,0.1); color: #ef4444; border-radius: 3px; padding: 0.1rem 0.35rem;
}
.gs-override-badge {
  font-size: 0.58rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em;
  background: rgba(245,158,11,0.1); color: #f59e0b; border-radius: 3px; padding: 0.1rem 0.35rem;
}
.gs-var-preview { font-family: 'Fira Code', monospace; font-size: 0.72rem; color: var(--text-muted); max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.gs-no-val { color: var(--text-dim); font-style: italic; font-family: var(--font-body); }

.gs-reveal-btn {
  background: none; border: none; color: var(--text-dim);
  padding: 0.2rem; border-radius: 3px; transition: color 0.12s;
}
.gs-reveal-btn:hover { color: var(--text); }
.gs-var-del {
  background: none; border: none; color: var(--text-dim);
  padding: 0.2rem; border-radius: 3px; transition: color 0.12s; opacity: 0;
}
.gs-var-summary:hover .gs-var-del, .gs-var-row--expanded .gs-var-del { opacity: 1; }
.gs-var-del:hover { color: var(--danger); }

/* Expanded detail */
.gs-var-detail { padding: 0.8rem 0.9rem; background: var(--bg); border-top: 1px solid var(--border); display: flex; flex-direction: column; gap: 0.7rem; }

.gs-detail-row {
  display: flex; align-items: center; gap: 0.75rem;
}
.gs-detail-row--wrap { flex-wrap: wrap; align-items: flex-start; }
.gs-detail-label { font-size: 0.68rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--text-muted); width: 78px; flex-shrink: 0; }
.gs-detail-input {
  flex: 1; background: var(--surface); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 0.38rem 0.6rem;
  font-size: 0.8rem; color: var(--text); outline: none; transition: border-color 0.15s;
}
.gs-detail-input:focus { border-color: var(--purple-mid); }
.gs-detail-input::placeholder { color: var(--text-dim); }

/* Category pills */
.gs-cat-pills { display: flex; gap: 0.3rem; flex-wrap: wrap; }
.gs-cat-pill {
  display: flex; align-items: center; gap: 0.3rem;
  padding: 0.22rem 0.6rem; border-radius: 100px;
  background: none; border: 1.5px solid var(--border);
  font-size: 0.7rem; color: var(--text-muted); transition: all 0.15s;
}
.gs-cat-pill:hover { border-color: var(--cat-color); color: var(--text); }
.gs-cat-pill.active {
  border-color: var(--cat-color);
  background: color-mix(in srgb, var(--cat-color) 12%, transparent);
  color: var(--cat-color); font-weight: 700;
}

/* Toggle */
.gs-toggle {
  width: 36px; height: 20px; border-radius: 100px;
  background: var(--border-2); border: none;
  position: relative; transition: background 0.2s; cursor: pointer; flex-shrink: 0;
}
.gs-toggle.on { background: var(--purple); }
.gs-toggle-knob {
  position: absolute; width: 14px; height: 14px; border-radius: 50%;
  background: #fff; top: 3px; left: 3px;
  transition: transform 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.15);
}
.gs-toggle.on .gs-toggle-knob { transform: translateX(16px); }
.gs-toggle-hint { font-size: 0.7rem; color: var(--text-dim); }

/* Tags */
.gs-tags-row { display: flex; gap: 0.3rem; flex-wrap: wrap; align-items: center; }
.gs-tag {
  display: flex; align-items: center; gap: 0.2rem;
  background: var(--purple-dim); border: 1px solid rgba(108,63,197,0.18);
  color: var(--purple); font-size: 0.65rem; font-weight: 600;
  padding: 0.15rem 0.45rem; border-radius: 100px;
}
.gs-tag-x { background: none; border: none; color: var(--purple); font-size: 0.9rem; line-height: 1; padding: 0; transition: opacity 0.12s; }
.gs-tag-x:hover { opacity: 0.6; }
.gs-tag-input {
  background: none; border: none; border-bottom: 1px dashed var(--border-2);
  color: var(--text); font-size: 0.72rem; outline: none; width: 80px; padding: 0.1rem 0.2rem;
}
.gs-tag-input::placeholder { color: var(--text-dim); }
.gs-tag-filter { font-size: 0.68rem; }

/* Env grid */
.gs-env-grid-label { font-size: 0.65rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); margin-bottom: -0.2rem; }
.gs-env-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; }
.gs-env-cell {
  background: var(--surface); border: 1.5px solid var(--border);
  border-radius: var(--r-sm); padding: 0.5rem 0.6rem;
  transition: border-color 0.15s;
}
.gs-env-cell.active { border-color: var(--env-color, var(--purple)); }
.gs-env-cell-head { display: flex; align-items: center; gap: 0.3rem; margin-bottom: 0.35rem; }
.gs-env-cell-label { font-size: 0.65rem; font-weight: 600; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.06em; }
.gs-env-overridden-badge { font-size: 0.55rem; color: #f59e0b; font-weight: 700; background: rgba(245,158,11,0.1); padding: 0.05rem 0.3rem; border-radius: 3px; margin-left: auto; }
.gs-env-input {
  width: 100%; background: var(--bg); border: 1.5px solid var(--border);
  border-radius: 4px; padding: 0.35rem 0.5rem;
  font-size: 0.72rem; font-family: 'Fira Code', monospace; color: var(--text);
  outline: none; transition: border-color 0.15s;
}
.gs-env-input:focus { border-color: var(--purple-mid); }
.gs-env-input.masked { letter-spacing: 0.15em; color: var(--text-dim); }
.gs-env-input::placeholder { color: var(--text-dim); font-family: var(--font-body); font-style: italic; letter-spacing: 0; }
.gs-env-input-wrap { display: flex; flex-direction: column; gap: 0.25rem; }
.gs-env-override-val { display: flex; align-items: center; gap: 0.35rem; }
.gs-override-val-text { font-size: 0.65rem; font-family: 'Fira Code', monospace; color: #f59e0b; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* ── Empty state ─────────────────────────────────────────────────────────────── */
.gs-empty { display: flex; flex-direction: column; align-items: center; gap: 0.6rem; padding: 4rem 1rem; color: var(--text-muted); }
.gs-empty-icon { font-size: 2.5rem; opacity: 0.25; }
.gs-empty p { font-size: 0.85rem; }
.gs-empty-reset {
  background: none; border: 1.5px solid var(--border-2); border-radius: var(--r-sm);
  color: var(--purple); font-size: 0.78rem; font-weight: 600;
  padding: 0.4rem 1rem; margin-top: 0.25rem; transition: all 0.15s;
}
.gs-empty-reset:hover { background: var(--purple-dim); }

/* ── Footer ──────────────────────────────────────────────────────────────────── */
.gs-footer {
  display: flex; align-items: center; justify-content: space-between; gap: 1rem;
  padding: 0.65rem 1.4rem;
  border-top: 1px solid var(--border); background: var(--bg);
  flex-shrink: 0; flex-wrap: wrap;
}
.gs-footer-env { display: flex; align-items: center; gap: 0.4rem; font-size: 0.72rem; color: var(--text-muted); }
.gs-footer-env strong { color: var(--text); }
.gs-footer-hint { font-size: 0.68rem; color: var(--text-dim); }
.gs-footer-hint code { background: var(--purple-dim); color: var(--purple); padding: 0.05em 0.3em; border-radius: 3px; font-size: 0.62rem; }

/* ── Responsive ──────────────────────────────────────────────────────────────── */
@media (max-width: 600px) {
  .gs-panel { width: 100% !important; }
  .gs-env-grid { grid-template-columns: 1fr; }
  .gs-add-grid { grid-template-columns: 1fr; }
}
